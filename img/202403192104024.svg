<svg id="SvgjsSvg1123" width="756" height="578" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1124"><pattern patternUnits="userSpaceOnUse" id="pattern_mark_0" width="300" height="300"><text x="150" y="100" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><pattern patternUnits="userSpaceOnUse" id="pattern_mark_1" width="300" height="300"><text x="150" y="200" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><marker id="SvgjsMarker1136" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1137" d="M0,0 L13,4.5 L0,9 L0,0" fill="#7985ec" stroke="#7985ec" stroke-width="1"></path></marker><marker id="SvgjsMarker1158" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1159" d="M0,0 L13,4.5 L0,9 L0,0" fill="#7985ec" stroke="#7985ec" stroke-width="1"></path></marker><marker id="SvgjsMarker1180" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1181" d="M0,0 L13,4.5 L0,9 L0,0" fill="#7985ec" stroke="#7985ec" stroke-width="1"></path></marker><marker id="SvgjsMarker1188" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1189" d="M0,0 L13,4.5 L0,9 L0,0" fill="#7985ec" stroke="#7985ec" stroke-width="1"></path></marker><marker id="SvgjsMarker1202" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1203" d="M0,0 L13,4.5 L0,9 L0,0" fill="#7985ec" stroke="#7985ec" stroke-width="1"></path></marker><marker id="SvgjsMarker1216" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1217" d="M0,0 L13,4.5 L0,9 L0,0" fill="#7985ec" stroke="#7985ec" stroke-width="1"></path></marker><marker id="SvgjsMarker1224" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1225" d="M0,0 L13,4.5 L0,9 L0,0" fill="#7985ec" stroke="#7985ec" stroke-width="1"></path></marker><marker id="SvgjsMarker1238" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1239" d="M0,0 L13,4.5 L0,9 L0,0" fill="#7985ec" stroke="#7985ec" stroke-width="1"></path></marker></defs><rect id="svgbackgroundid" width="756" height="578" fill="transparent"></rect><rect id="SvgjsRect1126" width="756" height="578" fill="url(#pattern_mark_0)"></rect><rect id="SvgjsRect1127" width="756" height="578" fill="url(#pattern_mark_1)"></rect><g id="SvgjsG1128" transform="translate(25,198)"><path id="SvgjsPath1129" d="M 16.666666666666668 0L 83.33333333333333 0C 105.55555555555556 0 105.55555555555556 50 83.33333333333333 50L 16.666666666666668 50C -5.555555555555556 50 -5.555555555555556 0 16.666666666666668 0Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1130"><text id="SvgjsText1131" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="80px" fill="#7985ec" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="14.375" transform="rotate(0)"><tspan id="SvgjsTspan1132" dy="16.25" x="50"><tspan id="SvgjsTspan1133" style="">业务代码</tspan></tspan></text></g></g><g id="SvgjsG1134"><path id="SvgjsPath1135" d="M75 248.75L75 284.5L75 284.5L75 318.3" stroke="#7985ec" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1136)"></path><rect id="SvgjsRect1138" width="84" height="18" x="33" y="273.09589041095893" fill="#ffffff"></rect><text id="SvgjsText1139" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="84px" fill="#7985ec" font-weight="700" align="top" lineHeight="16px" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="270.47089041095893" transform="rotate(0)"><tspan id="SvgjsTspan1140" dy="16.25" x="75"><tspan id="SvgjsTspan1141" style="">1. 更新数据库</tspan></tspan></text></g><g id="SvgjsG1142" transform="translate(40,321)"><path id="SvgjsPath1143" d="M 0 11.666666666666666L 0 68C 0 84 70 84 70 68L 70 11.666666666666666C 70 -3.1818181818181817 0 -3.1818181818181817 0 11.666666666666666ZM 0 11.666666666666666C 0 26.25 70 26.25 70 11.666666666666666C 70 26.25 0 26.25 0 11.666666666666666" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1144"><text id="SvgjsText1145" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="70px" fill="#7985ec" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="-11.125" transform="rotate(0)"><tspan id="SvgjsTspan1146" dy="16.25" x="35"><tspan id="SvgjsTspan1147" style=""> </tspan></tspan><tspan id="SvgjsTspan1148" dy="16.25" x="35"><tspan id="SvgjsTspan1149" style=""> </tspan></tspan><tspan id="SvgjsTspan1150" dy="16.25" x="35"><tspan id="SvgjsTspan1151" style="">数</tspan></tspan><tspan id="SvgjsTspan1152" dy="16.25" x="35"><tspan id="SvgjsTspan1153" style="">据</tspan></tspan><tspan id="SvgjsTspan1154" dy="16.25" x="35"><tspan id="SvgjsTspan1155" style="">库</tspan></tspan></text></g></g><g id="SvgjsG1156"><path id="SvgjsPath1157" d="M75 401.75L75 442L75 442L75 480.3" stroke="#7985ec" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1158)"></path><rect id="SvgjsRect1160" width="81" height="18" x="34.5" y="431.0670731707317" fill="#ffffff"></rect><text id="SvgjsText1161" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="81px" fill="#7985ec" font-weight="700" align="top" lineHeight="16px" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="428.4420731707317" transform="rotate(0)"><tspan id="SvgjsTspan1162" dy="16.25" x="75"><tspan id="SvgjsTspan1163" style="">2. 写入binlog</tspan></tspan></text></g><g id="SvgjsG1164" transform="translate(25,483)"><path id="SvgjsPath1165" d="M 0 0L 100 0L 100 70L 0 70L 0 0ZM 16.666666666666668 0L 16.666666666666668 70M 0 14L 100 14" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1166"><text id="SvgjsText1167" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="84px" fill="#7985ec" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="31.375" transform="rotate(0)"><tspan id="SvgjsTspan1168" dy="16.25" x="58.66666666666667"><tspan id="SvgjsTspan1169" style="">binlog日志</tspan></tspan></text></g></g><g id="SvgjsG1170" transform="translate(356,483)"><path id="SvgjsPath1171" d="M 0 0L 100 0L 100 70L 0 70L 0 0ZM 16.666666666666668 0L 16.666666666666668 70M 83.33333333333333 0L 83.33333333333333 70" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1172"><text id="SvgjsText1173" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="67px" fill="#7985ec" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="15.875" transform="rotate(0)"><tspan id="SvgjsTspan1174" dy="16.25" x="50.16666666666667"><tspan id="SvgjsTspan1175" style="">订阅binlog</tspan></tspan><tspan id="SvgjsTspan1176" dy="16.25" x="50.16666666666667"><tspan id="SvgjsTspan1177" style="">程序</tspan></tspan></text></g></g><g id="SvgjsG1178"><path id="SvgjsPath1179" d="M355.25 518L240.5 518L240.5 518L127.69999999999999 518" stroke="#7985ec" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1180)"></path><rect id="SvgjsRect1182" width="133" height="18" x="174.10648854961835" y="509" fill="#ffffff"></rect><text id="SvgjsText1183" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="133px" fill="#7985ec" font-weight="700" align="top" lineHeight="16px" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="506.375" transform="rotate(0)"><tspan id="SvgjsTspan1184" dy="16.25" x="240.60648854961835"><tspan id="SvgjsTspan1185" style="">3. 获取binlog操作日志</tspan></tspan></text></g><g id="SvgjsG1186"><path id="SvgjsPath1187" d="M406 482.25L406 442L406 442L406 403.7" stroke="#7985ec" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1188)"></path><rect id="SvgjsRect1190" width="171" height="18" x="320.5" y="433.975" fill="#ffffff"></rect><text id="SvgjsText1191" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="171px" fill="#7985ec" font-weight="700" align="top" lineHeight="16px" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="431.35" transform="rotate(0)"><tspan id="SvgjsTspan1192" dy="16.25" x="406"><tspan id="SvgjsTspan1193" style="">4. 提取出操作的数据以及key</tspan></tspan></text></g><g id="SvgjsG1194" transform="translate(356,331)"><path id="SvgjsPath1195" d="M 0 0L 100 0L 100 70L 0 70Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1196"><text id="SvgjsText1197" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="80px" fill="#7985ec" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="24.375" transform="rotate(0)"><tspan id="SvgjsTspan1198" dy="16.25" x="50"><tspan id="SvgjsTspan1199" style="">非业务代码</tspan></tspan></text></g></g><g id="SvgjsG1200"><path id="SvgjsPath1201" d="M406 330.25L406 289.5L406 289.5L406 250.7" stroke="#7985ec" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1202)"></path><rect id="SvgjsRect1204" width="132" height="18" x="340" y="281.9542168674699" fill="#ffffff"></rect><text id="SvgjsText1205" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="132px" fill="#7985ec" font-weight="700" align="top" lineHeight="16px" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="279.3292168674699" transform="rotate(0)"><tspan id="SvgjsTspan1206" dy="16.25" x="406"><tspan id="SvgjsTspan1207" style="">6. 操作的数据以及key</tspan></tspan></text></g><g id="SvgjsG1208" transform="translate(366,168)"><path id="SvgjsPath1209" d="M 40 80C -13.333333333333336 80 -13.333333333333336 0 40 0C 93.33333333333334 0 93.33333333333334 80 40 80L 80 80Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1210"><text id="SvgjsText1211" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="60px" fill="#7985ec" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="29.375" transform="rotate(0)"><tspan id="SvgjsTspan1212" dy="16.25" x="40"><tspan id="SvgjsTspan1213" style="">消息队列</tspan></tspan></text></g></g><g id="SvgjsG1214"><path id="SvgjsPath1215" d="M365.25 208L259 208L259 366L353.3 366" stroke="#7985ec" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1216)"></path><rect id="SvgjsRect1218" width="145" height="18" x="186.5" y="245.2910087719298" fill="#ffffff"></rect><text id="SvgjsText1219" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="145px" fill="#7985ec" font-weight="700" align="top" lineHeight="16px" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="242.6660087719298" transform="rotate(0)"><tspan id="SvgjsTspan1220" dy="16.25" x="259"><tspan id="SvgjsTspan1221" style="">7. 操作的数据就以及key</tspan></tspan></text></g><g id="SvgjsG1222"><path id="SvgjsPath1223" d="M456.75 348L543.9917828430524 348L543.9917828430524 348L629.2835656861048 348" stroke-dasharray="8,5" stroke="#7985ec" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1224)"></path><rect id="SvgjsRect1226" width="110" height="18" x="488.02900643162366" y="339" fill="#ffffff"></rect><text id="SvgjsText1227" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="110px" fill="#7985ec" font-weight="700" align="top" lineHeight="16px" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="336.375" transform="rotate(0)"><tspan id="SvgjsTspan1228" dy="16.25" x="543.0290064316237"><tspan id="SvgjsTspan1229" style="">❌5. 删除缓存失败</tspan></tspan></text></g><g id="SvgjsG1230" transform="translate(631,326)"><path id="SvgjsPath1231" d="M 15 0L 88.33333333333333 0C 103.18181818181819 0 103.18181818181819 70 88.33333333333333 70L 15 70C -5 70 -5 0 15 0ZM 88.33333333333333 0C 73.75 0 73.75 70 88.33333333333333 70C 73.75 70 73.75 0 88.33333333333333 0" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1232"><text id="SvgjsText1233" font-family="&quot;Comic Sans MS&quot;" text-anchor="middle" font-size="13px" width="80px" fill="#7985ec" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="&quot;Comic Sans MS&quot;" size="13px" weight="700" font-style="" opacity="1" y="24.375" transform="rotate(0)"><tspan id="SvgjsTspan1234" dy="16.25" x="40"><tspan id="SvgjsTspan1235" style="">缓存</tspan></tspan></text></g></g><g id="SvgjsG1236"><path id="SvgjsPath1237" d="M631.2132543668953 372.6183820092469L543.9816271834477 372.6183820092469L543.9816271834477 372.6183820092469L458.70000000000005 372.6183820092469" stroke="#7985ec" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1238)"></path></g><g id="SvgjsG1240" transform="translate(25,25)"><path id="SvgjsPath1241" d="M 0 0L 276 0L 292 16L 292 154L 0 154L 0 0Z" stroke="none" fill-opacity="1" fill="#fff7bc"></path><path id="SvgjsPath1242" d="M 276 0L 276 16L 292 16Z" stroke="none" fill-opacity="1" fill="#e4d089"></path><path id="SvgjsPath1243" d="M 0 0L 276 0L 292 16L 292 154L 0 154L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG1244"><text id="SvgjsText1245" font-family="微软雅黑" text-anchor="start" font-size="13px" width="272px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="700" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1246" dy="16.25" x="10"><tspan id="SvgjsTspan1247" style="">流程如下图所示：</tspan></tspan><tspan id="SvgjsTspan1248" dy="16.25" x="10"><tspan id="SvgjsTspan1249" style="">1. 更新数据库数据</tspan></tspan><tspan id="SvgjsTspan1250" dy="16.25" x="10"><tspan id="SvgjsTspan1251" style="">2. 数据库会将操作信息写入binlog日志当中</tspan></tspan><tspan id="SvgjsTspan1252" dy="16.25" x="10"><tspan id="SvgjsTspan1253" style="">3. 订阅程序提取出所需要的数据已经key</tspan></tspan><tspan id="SvgjsTspan1254" dy="16.25" x="10"><tspan id="SvgjsTspan1255" style="">4. 另起一段非业务代码，获得该信息</tspan></tspan><tspan id="SvgjsTspan1256" dy="16.25" x="10"><tspan id="SvgjsTspan1257" style="">5. 尝试删除缓存操作，发现操作失败</tspan></tspan><tspan id="SvgjsTspan1258" dy="16.25" x="10"><tspan id="SvgjsTspan1259" style="">6. 将这些信息发送至消息队列</tspan></tspan><tspan id="SvgjsTspan1260" dy="16.25" x="10"><tspan id="SvgjsTspan1261" style="">7. 重新从消息队列中获得该数据，重试操作</tspan></tspan></text></g></g></svg>