<svg id="SvgjsSvg4101" width="1317.9024390243903" height="594.6097560975611" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs4102"><pattern patternUnits="userSpaceOnUse" id="pattern_mark_0" width="300" height="300"><text x="150" y="100" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><pattern patternUnits="userSpaceOnUse" id="pattern_mark_1" width="300" height="300"><text x="150" y="200" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern></defs><rect id="svgbackgroundid" width="1317.9024390243903" height="594.6097560975611" fill="transparent"></rect><rect id="SvgjsRect4104" width="1317.9024390243903" height="594.6097560975611" fill="url(#pattern_mark_0)"></rect><rect id="SvgjsRect4105" width="1317.9024390243903" height="594.6097560975611" fill="url(#pattern_mark_1)"></rect><g id="SvgjsG4106" transform="translate(25,94.73170731707319)"><path id="SvgjsPath4107" d="M 0 0L 603.6585365853659 0L 603.6585365853659 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4108"><text id="SvgjsText4109" font-family="微软雅黑" text-anchor="middle" font-size="25px" width="604px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="25px" weight="700" font-style="" opacity="1" y="-1.625" transform="rotate(0)"><tspan id="SvgjsTspan4110" dy="31.25" x="302"><tspan id="SvgjsTspan4111" style="">volatile 写之前的操作，都禁止重排序到 volatile 之后</tspan></tspan></text></g></g><g id="SvgjsG4112" transform="translate(688.9024390243903,94.73170731707319)"><path id="SvgjsPath4113" d="M 0 0L 603.6585365853659 0L 603.6585365853659 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4114"><text id="SvgjsText4115" font-family="微软雅黑" text-anchor="middle" font-size="25px" width="604px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="25px" weight="700" font-style="" opacity="1" y="-1.625" transform="rotate(0)"><tspan id="SvgjsTspan4116" dy="31.25" x="302"><tspan id="SvgjsTspan4117" style="">volatile 读之后的操作，都禁止重排序到 volatile 之前</tspan></tspan></text></g></g><g id="SvgjsG4118"><path id="SvgjsPath4119" d="M662.8048780487807 97.17073170731712L662.8048780487807 333.39024390243907L662.8048780487807 333.39024390243907L662.8048780487807 569.6097560975611" stroke="#a7932c" stroke-width="5" fill="none"></path></g><g id="SvgjsG4120" transform="translate(41.63414634146342,180.41463414634148)"><path id="SvgjsPath4121" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#7985ec"></path><g id="SvgjsG4122"><text id="SvgjsText4123" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4124" dy="23.75" x="87.5"><tspan id="SvgjsTspan4125" style="">i = 2</tspan></tspan></text></g></g><g id="SvgjsG4126" transform="translate(41.63414634146342,285.7804878048781)"><path id="SvgjsPath4127" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG4128"><text id="SvgjsText4129" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4130" dy="23.75" x="87.5"><tspan id="SvgjsTspan4131" style="">StoreStore屏障</tspan></tspan></text></g></g><g id="SvgjsG4132" transform="translate(41.63414634146345,391.1463414634147)"><path id="SvgjsPath4133" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#a23735"></path><g id="SvgjsG4134"><text id="SvgjsText4135" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4136" dy="23.75" x="87.5"><tspan id="SvgjsTspan4137" style="">flag = true</tspan></tspan></text></g></g><g id="SvgjsG4138" transform="translate(41.63414634146342,496.51219512195127)"><path id="SvgjsPath4139" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG4140"><text id="SvgjsText4141" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4142" dy="23.75" x="87.5"><tspan id="SvgjsTspan4143" style="">StoreLoad屏障</tspan></tspan></text></g></g><g id="SvgjsG4144" transform="translate(251.8292682926829,180.62195121951223)"><path id="SvgjsPath4145" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4146"><text id="SvgjsText4147" font-family="微软雅黑" text-anchor="start" font-size="19px" width="100px" fill="#7985ec" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan4148" dy="23.75" x="0"><tspan id="SvgjsTspan4149" style="">普通写</tspan></tspan></text></g></g><g id="SvgjsG4150" transform="translate(251.8292682926829,281.61280487804885)"><path id="SvgjsPath4151" d="M 0 0L 201.21951219512198 0L 201.21951219512198 48.75L 0 48.75Z" stroke="none" fill="none"></path><g id="SvgjsG4152"><text id="SvgjsText4153" font-family="微软雅黑" text-anchor="start" font-size="19px" width="202px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-4" transform="rotate(0)"><tspan id="SvgjsTspan4154" dy="23.75" x="0"><tspan id="SvgjsTspan4155" style="">禁止上面的普通写与下</tspan></tspan><tspan id="SvgjsTspan4156" dy="23.75" x="0"><tspan id="SvgjsTspan4157" style="">面的 volatile写重排序</tspan></tspan></text></g></g><g id="SvgjsG4158" transform="translate(251.8292682926829,391.35365853658544)"><path id="SvgjsPath4159" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4160"><text id="SvgjsText4161" font-family="微软雅黑" text-anchor="start" font-size="19px" width="100px" fill="#a23735" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan4162" dy="23.75" x="0"><tspan id="SvgjsTspan4163" style="">volatile写</tspan></tspan></text></g></g><g id="SvgjsG4164" transform="translate(251.8292682926829,496.719512195122)"><path id="SvgjsPath4165" d="M 0 0L 237.80487804878055 0L 237.80487804878055 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4166"><text id="SvgjsText4167" font-family="微软雅黑" text-anchor="start" font-size="19px" width="238px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-19.875" transform="rotate(0)"><tspan id="SvgjsTspan4168" dy="23.75" x="0"><tspan id="SvgjsTspan4169" style="">禁止上面的volatile写与下面</tspan></tspan><tspan id="SvgjsTspan4170" dy="23.75" x="0"><tspan id="SvgjsTspan4171" style="">可能有的volatile读/写重排</tspan></tspan><tspan id="SvgjsTspan4172" dy="23.75" x="0"><tspan id="SvgjsTspan4173" style="">序</tspan></tspan></text></g></g><g id="SvgjsG4174" transform="translate(1028.7073170731708,180.62195121951223)"><path id="SvgjsPath4175" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#a23735"></path><g id="SvgjsG4176"><text id="SvgjsText4177" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4178" dy="23.75" x="87.5"><tspan id="SvgjsTspan4179" style="">if(flag)</tspan></tspan></text></g></g><g id="SvgjsG4180" transform="translate(1028.7073170731708,285.9878048780483)"><path id="SvgjsPath4181" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG4182"><text id="SvgjsText4183" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4184" dy="23.75" x="87.5"><tspan id="SvgjsTspan4185" style="">LoadLoad屏障</tspan></tspan></text></g></g><g id="SvgjsG4186" transform="translate(1028.7073170731708,391.3536585365849)"><path id="SvgjsPath4187" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c331"></path><g id="SvgjsG4188"><text id="SvgjsText4189" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4190" dy="23.75" x="87.5"><tspan id="SvgjsTspan4191" style="">LoadStore屏障</tspan></tspan></text></g></g><g id="SvgjsG4192" transform="translate(1028.7073170731708,496.71951219512147)"><path id="SvgjsPath4193" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#7985ec"></path><g id="SvgjsG4194"><text id="SvgjsText4195" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4196" dy="23.75" x="87.5"><tspan id="SvgjsTspan4197" style="">System...</tspan></tspan></text></g></g><g id="SvgjsG4198" transform="translate(878.4146341463413,180.82926829268297)"><path id="SvgjsPath4199" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4200"><text id="SvgjsText4201" font-family="微软雅黑" text-anchor="end" font-size="19px" width="100px" fill="#a23735" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan4202" dy="23.75" x="100"><tspan id="SvgjsTspan4203" style="">volatile读</tspan></tspan></text></g></g><g id="SvgjsG4204" transform="translate(726.219512195122,286.19512195121905)"><path id="SvgjsPath4205" d="M 0 0L 252.19512195121933 0L 252.19512195121933 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4206"><text id="SvgjsText4207" font-family="微软雅黑" text-anchor="end" font-size="19px" width="253px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-8.375" transform="rotate(0)"><tspan id="SvgjsTspan4208" dy="23.75" x="253"><tspan id="SvgjsTspan4209" style="">禁止处理器把上面的volatile读</tspan></tspan><tspan id="SvgjsTspan4210" dy="23.75" x="253"><tspan id="SvgjsTspan4211" style="">与下面的普通读重排序</tspan></tspan></text></g></g><g id="SvgjsG4212" transform="translate(740.6097560975604,379.06097560975564)"><path id="SvgjsPath4213" d="M 0 0L 237.8048780487809 0L 237.8048780487809 65L 0 65Z" stroke="none" fill="none"></path><g id="SvgjsG4214"><text id="SvgjsText4215" font-family="微软雅黑" text-anchor="end" font-size="19px" width="238px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="4.125" transform="rotate(0)"><tspan id="SvgjsTspan4216" dy="23.75" x="238"><tspan id="SvgjsTspan4217" style="">静止处理器把上面的volatile</tspan></tspan><tspan id="SvgjsTspan4218" dy="23.75" x="238"><tspan id="SvgjsTspan4219" style="">读与下面的普通写重排序</tspan></tspan></text></g></g><g id="SvgjsG4220" transform="translate(740.6097560975606,496.92682926829224)"><path id="SvgjsPath4221" d="M 0 0L 237.80487804878055 0L 237.80487804878055 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4222"><text id="SvgjsText4223" font-family="微软雅黑" text-anchor="end" font-size="19px" width="238px" fill="#7985ec" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan4224" dy="23.75" x="238"><tspan id="SvgjsTspan4225" style="">普通读</tspan></tspan></text></g></g><g id="SvgjsG4226" transform="translate(32.878048780487816,50.00000000000001)"><path id="SvgjsPath4227" d="M 0 0L 447 0L 447 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4228"><text id="SvgjsText4229" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="447px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="-4" transform="rotate(0)"><tspan id="SvgjsTspan4230" dy="20" x="223.5"><tspan id="SvgjsTspan4231" style="font-weight: bold;">- 在每一个`volatile`写操作前面插入一个`StoreStore`屏障</tspan></tspan><tspan id="SvgjsTspan4232" dy="20" x="223.5"><tspan id="SvgjsTspan4233" style="font-weight: bold;">- 在每一个`volatile`写操作后面插入一个`StoreLoad`屏障</tspan></tspan></text></g></g><g id="SvgjsG4234" transform="translate(760.3658536585367,25)"><path id="SvgjsPath4235" d="M 0 0L 434.6829268292681 0L 434.6829268292681 65L 0 65Z" stroke="none" fill="none"></path><g id="SvgjsG4236"><text id="SvgjsText4237" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="435px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="700" font-style="" opacity="1" y="8.5" transform="rotate(0)"><tspan id="SvgjsTspan4238" dy="20" x="217.5"><tspan id="SvgjsTspan4239" style="">- 在每一个`volatile`读操作后面插入一个`LoadLoad`屏障</tspan></tspan><tspan id="SvgjsTspan4240" dy="20" x="217.5"><tspan id="SvgjsTspan4241" style="">- 在每一个`volatile`读操作后面插入一个`LoadStore`屏障</tspan></tspan></text></g></g></svg>