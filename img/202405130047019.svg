<svg id="SvgjsSvg1006" width="1113.5" height="840.0717999999999" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><pattern patternUnits="userSpaceOnUse" id="pattern_mark_0" width="300" height="300"><text x="150" y="100" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><pattern patternUnits="userSpaceOnUse" id="pattern_mark_1" width="300" height="300"><text x="150" y="200" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern></defs><rect id="svgbackgroundid" width="1113.5" height="840.0717999999999" fill="transparent"></rect><rect id="SvgjsRect1009" width="1113.5" height="840.0717999999999" fill="url(#pattern_mark_0)"></rect><rect id="SvgjsRect1010" width="1113.5" height="840.0717999999999" fill="url(#pattern_mark_1)"></rect><g id="SvgjsG1011" transform="translate(25,25)"><path id="SvgjsPath1012" d="M0 0L531.5 0L531.5 31.602871999999998 L0 31.602871999999998Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1013" d="M531.5 0L1063 0L1063 31.602871999999998 L531.5 31.602871999999998Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1014" d="M0 31.602871999999998L531.5 31.602871999999998L531.5 105.79061401999999 L0 105.79061401999999Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1015" d="M531.5 31.602871999999998L1063 31.602871999999998L1063 105.79061401999999 L531.5 105.79061401999999Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1016" d="M0 105.71160683999999L531.5 105.71160683999999L531.5 290.82542958 L0 290.82542958Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1017" d="M531.5 105.71160683999999L1063 105.71160683999999L1063 290.82542958 L531.5 290.82542958Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1018" d="M0 290.82542958L531.5 290.82542958L531.5 563.95325084 L0 563.95325084Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1019" d="M531.5 290.82542958L1063 290.82542958L1063 563.95325084 L531.5 563.95325084Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1020" d="M0 564.03225802L531.5 564.03225802L531.5 716.12107952 L0 716.12107952Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1021" d="M531.5 564.03225802L1063 564.03225802L1063 716.12107952 L531.5 716.12107952Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1022" d="M0 716.0420723399999L531.5 716.0420723399999L531.5 790.0717999999999 L0 790.0717999999999Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1023" d="M531.5 716.0420723399999L1063 716.0420723399999L1063 790.0717999999999 L531.5 790.0717999999999Z" stroke="rgba(183,191,174,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1024"><text id="SvgjsText1025" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="3.426435999999999" transform="rotate(0)"><tspan id="SvgjsTspan1026" dy="18.75" x="0"><tspan id="SvgjsTspan1027" style="">session_1</tspan></tspan></text></g><g id="SvgjsG1028"><text id="SvgjsText1029" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="3.426435999999999" transform="rotate(0)"><tspan id="SvgjsTspan1030" dy="18.75" x="531.5"><tspan id="SvgjsTspan1031" style="">session_2</tspan></tspan></text></g><g id="SvgjsG1032"><text id="SvgjsText1033" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="37.82174300999999" transform="rotate(0)"><tspan id="SvgjsTspan1034" dy="18.75" x="0"><tspan id="SvgjsTspan1035" style="">获得表 mylock 的 READ 锁定</tspan></tspan><tspan id="SvgjsTspan1036" dy="18.75" x="0"><tspan id="SvgjsTspan1037" style="">mysql&gt; LOCK TABLE mylock READ;</tspan></tspan><tspan id="SvgjsTspan1038" dy="18.75" x="0"><tspan id="SvgjsTspan1039" style="">Query OK, 0 rows affected (0.01 sec)</tspan></tspan></text></g><g id="SvgjsG1040"><text id="SvgjsText1041" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="56.32174300999999" transform="rotate(0)"><tspan id="SvgjsTspan1042" dy="18.75" x="531.5"><tspan id="SvgjsTspan1043" style="">连接终端</tspan></tspan></text></g><g id="SvgjsG1044"><text id="SvgjsText1045" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="120.39351820999998" transform="rotate(0)"><tspan id="SvgjsTspan1046" dy="18.75" x="0"><tspan id="SvgjsTspan1047" style="">当前 session 可以查询该表记录</tspan></tspan><tspan id="SvgjsTspan1048" dy="18.75" x="0"><tspan id="SvgjsTspan1049" style="">mysql&gt; SELECT * FROM mylock;</tspan></tspan><tspan id="SvgjsTspan1050" dy="18.75" x="0"><tspan id="SvgjsTspan1051" style="">+----+------+</tspan></tspan><tspan id="SvgjsTspan1052" dy="18.75" x="0"><tspan id="SvgjsTspan1053" style="">| id | name |</tspan></tspan><tspan id="SvgjsTspan1054" dy="18.75" x="0"><tspan id="SvgjsTspan1055" style="">+----+------+</tspan></tspan><tspan id="SvgjsTspan1056" dy="18.75" x="0"><tspan id="SvgjsTspan1057" style="">|  1   | s     |</tspan></tspan><tspan id="SvgjsTspan1058" dy="18.75" x="0"><tspan id="SvgjsTspan1059" style="">+----+------+</tspan></tspan><tspan id="SvgjsTspan1060" dy="18.75" x="0"><tspan id="SvgjsTspan1061" style="">1 row in set (0.00 sec)</tspan></tspan></text></g><g id="SvgjsG1062"><text id="SvgjsText1063" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="120.39351820999998" transform="rotate(0)"><tspan id="SvgjsTspan1064" dy="18.75" x="531.5"><tspan id="SvgjsTspan1065" style="">其它 session 也可以查询该表的记录</tspan></tspan><tspan id="SvgjsTspan1066" dy="18.75" x="531.5"><tspan id="SvgjsTspan1067" style="">mysql&gt; SELECT * FROM mylock;</tspan></tspan><tspan id="SvgjsTspan1068" dy="18.75" x="531.5"><tspan id="SvgjsTspan1069" style="">+----+------+</tspan></tspan><tspan id="SvgjsTspan1070" dy="18.75" x="531.5"><tspan id="SvgjsTspan1071" style="">| id | name |</tspan></tspan><tspan id="SvgjsTspan1072" dy="18.75" x="531.5"><tspan id="SvgjsTspan1073" style="">+----+------+</tspan></tspan><tspan id="SvgjsTspan1074" dy="18.75" x="531.5"><tspan id="SvgjsTspan1075" style="">|  1 | s    |</tspan></tspan><tspan id="SvgjsTspan1076" dy="18.75" x="531.5"><tspan id="SvgjsTspan1077" style="">+----+------+</tspan></tspan><tspan id="SvgjsTspan1078" dy="18.75" x="531.5"><tspan id="SvgjsTspan1079" style="">1 row in set (0.01 sec)</tspan></tspan></text></g><g id="SvgjsG1080"><text id="SvgjsText1081" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="396.51434021" transform="rotate(0)"><tspan id="SvgjsTspan1082" dy="18.75" x="0"><tspan id="SvgjsTspan1083" style="">当前 session 不能查询其它没有锁定的表</tspan></tspan><tspan id="SvgjsTspan1084" dy="18.75" x="0"><tspan id="SvgjsTspan1085" style="">mysql&gt; SELECT * FROM user1;</tspan></tspan><tspan id="SvgjsTspan1086" dy="18.75" x="0"><tspan id="SvgjsTspan1087" style="">ERROR 1100 (HY000): Table 'user1' was not locked with LOCK TABLES</tspan></tspan></text></g><g id="SvgjsG1088"><text id="SvgjsText1089" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="312.01434021" transform="rotate(0)"><tspan id="SvgjsTspan1090" dy="18.75" x="531.5"><tspan id="SvgjsTspan1091" style="">其它 session 可以查询或者更新未锁定的表</tspan></tspan><tspan id="SvgjsTspan1092" dy="18.75" x="531.5"><tspan id="SvgjsTspan1093" style="">mysql&gt; INSERT INTO user1(id, name, age, sex) VALUES(1002, '张三', 18, </tspan></tspan><tspan id="SvgjsTspan1094" dy="18.75" x="531.5"><tspan id="SvgjsTspan1095" style="">'male');</tspan></tspan><tspan id="SvgjsTspan1096" dy="18.75" x="531.5"><tspan id="SvgjsTspan1097" style="">Query OK, 1 row affected (0.01 sec)</tspan></tspan><tspan id="SvgjsTspan1098" dy="18.75" x="531.5"><tspan id="SvgjsTspan1099" style=""> </tspan></tspan><tspan id="SvgjsTspan1100" dy="18.75" x="531.5"><tspan id="SvgjsTspan1101" style="">mysql&gt; SELECT * FROM user1 WHERE id = 1002;</tspan></tspan><tspan id="SvgjsTspan1102" dy="18.75" x="531.5"><tspan id="SvgjsTspan1103" style="">+------+--------+------+------+</tspan></tspan><tspan id="SvgjsTspan1104" dy="18.75" x="531.5"><tspan id="SvgjsTspan1105" style="">| id   | name   | age  | sex  |</tspan></tspan><tspan id="SvgjsTspan1106" dy="18.75" x="531.5"><tspan id="SvgjsTspan1107" style="">+------+--------+------+------+</tspan></tspan><tspan id="SvgjsTspan1108" dy="18.75" x="531.5"><tspan id="SvgjsTspan1109" style="">| 1002 | 张三   |   18 | male |</tspan></tspan><tspan id="SvgjsTspan1110" dy="18.75" x="531.5"><tspan id="SvgjsTspan1111" style="">+------+--------+------+------+</tspan></tspan><tspan id="SvgjsTspan1112" dy="18.75" x="531.5"><tspan id="SvgjsTspan1113" style="">1 row in set (0.01 sec)</tspan></tspan></text></g><g id="SvgjsG1114"><text id="SvgjsText1115" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="571.70166877" transform="rotate(0)"><tspan id="SvgjsTspan1116" dy="18.75" x="0"><tspan id="SvgjsTspan1117" style="">当前 session 中插入或更新锁定的表都会提示错误：</tspan></tspan><tspan id="SvgjsTspan1118" dy="18.75" x="0"><tspan id="SvgjsTspan1119" style="">mysql&gt; INSERT INTO mylock(name) VALUES('e');</tspan></tspan><tspan id="SvgjsTspan1120" dy="18.75" x="0"><tspan id="SvgjsTspan1121" style="">ERROR 1099 (HY000): Table 'mylock' was locked with a READ lock and </tspan></tspan><tspan id="SvgjsTspan1122" dy="18.75" x="0"><tspan id="SvgjsTspan1123" style="">can't be updated</tspan></tspan><tspan id="SvgjsTspan1124" dy="18.75" x="0"><tspan id="SvgjsTspan1125" style="">mysql&gt; UPDATE mylock SET name = 'k' WHERE id = 1;</tspan></tspan><tspan id="SvgjsTspan1126" dy="18.75" x="0"><tspan id="SvgjsTspan1127" style="">ERROR 1099 (HY000): Table 'mylock' was locked with a READ lock and </tspan></tspan><tspan id="SvgjsTspan1128" dy="18.75" x="0"><tspan id="SvgjsTspan1129" style="">can't be updated</tspan></tspan></text></g><g id="SvgjsG1130"><text id="SvgjsText1131" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="609.20166877" transform="rotate(0)"><tspan id="SvgjsTspan1132" dy="18.75" x="531.5"><tspan id="SvgjsTspan1133" style="">其它 session 插入或更新锁定表会一直等待获得锁：</tspan></tspan><tspan id="SvgjsTspan1134" dy="18.75" x="531.5"><tspan id="SvgjsTspan1135" style="">mysql&gt; INSERT INTO mylock(name) VALUES('e');</tspan></tspan><tspan id="SvgjsTspan1136" dy="18.75" x="531.5"><tspan id="SvgjsTspan1137" style=""> </tspan></tspan></text></g><g id="SvgjsG1138"><text id="SvgjsText1139" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="722.18193617" transform="rotate(0)"><tspan id="SvgjsTspan1140" dy="18.75" x="0"><tspan id="SvgjsTspan1141" style="">释放锁</tspan></tspan><tspan id="SvgjsTspan1142" dy="18.75" x="0"><tspan id="SvgjsTspan1143" style="">mysql&gt; UNLOCK TABLES ;</tspan></tspan><tspan id="SvgjsTspan1144" dy="18.75" x="0"><tspan id="SvgjsTspan1145" style="">Query OK, 0 rows affected (0.01 sec)</tspan></tspan></text></g><g id="SvgjsG1146"><text id="SvgjsText1147" font-family="&quot;Comic Sans MS&quot;" text-anchor="start" font-size="15px" width="532px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="&quot;Comic Sans MS&quot;" size="15px" weight="400" font-style="" opacity="1" y="722.18193617" transform="rotate(0)"><tspan id="SvgjsTspan1148" dy="18.75" x="531.5"><tspan id="SvgjsTspan1149" style="">session_2获得锁，插入操作完成：</tspan></tspan><tspan id="SvgjsTspan1150" dy="18.75" x="531.5"><tspan id="SvgjsTspan1151" style="">mysql&gt; INSERT INTO mylock(name) VALUES('e');</tspan></tspan><tspan id="SvgjsTspan1152" dy="18.75" x="531.5"><tspan id="SvgjsTspan1153" style="">Query OK, 1 row affected (26.03 sec)</tspan></tspan></text></g></g><g id="SvgjsG1154"></g></svg>