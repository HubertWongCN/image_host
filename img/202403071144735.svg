<svg id="SvgjsSvg3851" width="1317.9024390243903" height="740.7317073170734" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs3852"><pattern patternUnits="userSpaceOnUse" id="pattern_mark_0" width="300" height="300"><text x="150" y="100" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><pattern patternUnits="userSpaceOnUse" id="pattern_mark_1" width="300" height="300"><text x="150" y="200" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern></defs><rect id="svgbackgroundid" width="1317.9024390243903" height="740.7317073170734" fill="transparent"></rect><rect id="SvgjsRect3854" width="1317.9024390243903" height="740.7317073170734" fill="url(#pattern_mark_0)"></rect><rect id="SvgjsRect3855" width="1317.9024390243903" height="740.7317073170734" fill="url(#pattern_mark_1)"></rect><g id="SvgjsG3856" transform="translate(25,25)"><path id="SvgjsPath3857" d="M 0 0L 603.6585365853659 0L 603.6585365853659 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3858"><text id="SvgjsText3859" font-family="微软雅黑" text-anchor="middle" font-size="25px" width="604px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="25px" weight="700" font-style="" opacity="1" y="-1.625" transform="rotate(0)"><tspan id="SvgjsTspan3860" dy="31.25" x="302"><tspan id="SvgjsTspan3861" style="">volatile 写之前的操作，都禁止重排序到 volatile 之后</tspan></tspan></text></g></g><g id="SvgjsG3862" transform="translate(688.9024390243903,25)"><path id="SvgjsPath3863" d="M 0 0L 603.6585365853659 0L 603.6585365853659 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3864"><text id="SvgjsText3865" font-family="微软雅黑" text-anchor="middle" font-size="25px" width="604px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="25px" weight="700" font-style="" opacity="1" y="-1.625" transform="rotate(0)"><tspan id="SvgjsTspan3866" dy="31.25" x="302"><tspan id="SvgjsTspan3867" style="">volatile 读之后的操作，都禁止重排序到 volatile 之前</tspan></tspan></text></g></g><g id="SvgjsG3868"><path id="SvgjsPath3869" d="M662.8048780487807 27.43902439024393L662.8048780487807 371.58536585365874L662.8048780487807 371.58536585365874L662.8048780487807 715.7317073170734" stroke="#a7932c" stroke-width="5" fill="none"></path></g><g id="SvgjsG3870" transform="translate(41.63414634146342,110.6829268292683)"><path id="SvgjsPath3871" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#7985ec"></path><g id="SvgjsG3872"><text id="SvgjsText3873" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3874" dy="23.75" x="87.5"><tspan id="SvgjsTspan3875" style="">i = 2</tspan></tspan></text></g></g><g id="SvgjsG3876" transform="translate(41.63414634146342,216.0487804878049)"><path id="SvgjsPath3877" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG3878"><text id="SvgjsText3879" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3880" dy="23.75" x="87.5"><tspan id="SvgjsTspan3881" style="">StoreStore屏障</tspan></tspan></text></g></g><g id="SvgjsG3882" transform="translate(41.63414634146345,321.4146341463415)"><path id="SvgjsPath3883" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#a23735"></path><g id="SvgjsG3884"><text id="SvgjsText3885" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3886" dy="23.75" x="87.5"><tspan id="SvgjsTspan3887" style="">flag = true</tspan></tspan></text></g></g><g id="SvgjsG3888" transform="translate(41.63414634146342,426.7804878048781)"><path id="SvgjsPath3889" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG3890"><text id="SvgjsText3891" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3892" dy="23.75" x="87.5"><tspan id="SvgjsTspan3893" style="">StoreLoad屏障</tspan></tspan></text></g></g><g id="SvgjsG3894" transform="translate(251.8292682926829,110.89024390243904)"><path id="SvgjsPath3895" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3896"><text id="SvgjsText3897" font-family="微软雅黑" text-anchor="start" font-size="19px" width="100px" fill="#7985ec" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan3898" dy="23.75" x="0"><tspan id="SvgjsTspan3899" style="">普通写</tspan></tspan></text></g></g><g id="SvgjsG3900" transform="translate(251.8292682926829,211.88109756097566)"><path id="SvgjsPath3901" d="M 0 0L 201.21951219512198 0L 201.21951219512198 48.75L 0 48.75Z" stroke="none" fill="none"></path><g id="SvgjsG3902"><text id="SvgjsText3903" font-family="微软雅黑" text-anchor="start" font-size="19px" width="202px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-4" transform="rotate(0)"><tspan id="SvgjsTspan3904" dy="23.75" x="0"><tspan id="SvgjsTspan3905" style="">禁止上面的普通写与下</tspan></tspan><tspan id="SvgjsTspan3906" dy="23.75" x="0"><tspan id="SvgjsTspan3907" style="">面的 volatile写重排序</tspan></tspan></text></g></g><g id="SvgjsG3908" transform="translate(251.8292682926829,321.62195121951225)"><path id="SvgjsPath3909" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3910"><text id="SvgjsText3911" font-family="微软雅黑" text-anchor="start" font-size="19px" width="100px" fill="#a23735" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan3912" dy="23.75" x="0"><tspan id="SvgjsTspan3913" style="">volatile写</tspan></tspan></text></g></g><g id="SvgjsG3914" transform="translate(251.8292682926829,426.9878048780488)"><path id="SvgjsPath3915" d="M 0 0L 237.80487804878055 0L 237.80487804878055 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3916"><text id="SvgjsText3917" font-family="微软雅黑" text-anchor="start" font-size="19px" width="238px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-19.875" transform="rotate(0)"><tspan id="SvgjsTspan3918" dy="23.75" x="0"><tspan id="SvgjsTspan3919" style="">禁止上面的volatile写与下面</tspan></tspan><tspan id="SvgjsTspan3920" dy="23.75" x="0"><tspan id="SvgjsTspan3921" style="">可能有的volatile读/写重排</tspan></tspan><tspan id="SvgjsTspan3922" dy="23.75" x="0"><tspan id="SvgjsTspan3923" style="">序</tspan></tspan></text></g></g><g id="SvgjsG3924" transform="translate(1028.7073170731708,110.89024390243904)"><path id="SvgjsPath3925" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#a23735"></path><g id="SvgjsG3926"><text id="SvgjsText3927" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3928" dy="23.75" x="87.5"><tspan id="SvgjsTspan3929" style="">if(flag)</tspan></tspan></text></g></g><g id="SvgjsG3930" transform="translate(1028.7073170731708,216.2560975609751)"><path id="SvgjsPath3931" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG3932"><text id="SvgjsText3933" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3934" dy="23.75" x="87.5"><tspan id="SvgjsTspan3935" style="">LoadLoad屏障</tspan></tspan></text></g></g><g id="SvgjsG3936" transform="translate(1028.7073170731708,321.6219512195117)"><path id="SvgjsPath3937" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c331"></path><g id="SvgjsG3938"><text id="SvgjsText3939" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3940" dy="23.75" x="87.5"><tspan id="SvgjsTspan3941" style="">LoadStore屏障</tspan></tspan></text></g></g><g id="SvgjsG3942" transform="translate(1028.7073170731708,426.9878048780483)"><path id="SvgjsPath3943" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#7985ec"></path><g id="SvgjsG3944"><text id="SvgjsText3945" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3946" dy="23.75" x="87.5"><tspan id="SvgjsTspan3947" style="">System...</tspan></tspan></text></g></g><g id="SvgjsG3948" transform="translate(878.4146341463413,111.09756097560978)"><path id="SvgjsPath3949" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3950"><text id="SvgjsText3951" font-family="微软雅黑" text-anchor="end" font-size="19px" width="100px" fill="#a23735" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan3952" dy="23.75" x="100"><tspan id="SvgjsTspan3953" style="">volatile读</tspan></tspan></text></g></g><g id="SvgjsG3954" transform="translate(726.219512195122,216.46341463414586)"><path id="SvgjsPath3955" d="M 0 0L 252.19512195121933 0L 252.19512195121933 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3956"><text id="SvgjsText3957" font-family="微软雅黑" text-anchor="end" font-size="19px" width="253px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-8.375" transform="rotate(0)"><tspan id="SvgjsTspan3958" dy="23.75" x="253"><tspan id="SvgjsTspan3959" style="">禁止处理器把上面的volatile读</tspan></tspan><tspan id="SvgjsTspan3960" dy="23.75" x="253"><tspan id="SvgjsTspan3961" style="">与下面的普通读重排序</tspan></tspan></text></g></g><g id="SvgjsG3962" transform="translate(740.6097560975604,309.32926829268246)"><path id="SvgjsPath3963" d="M 0 0L 237.8048780487809 0L 237.8048780487809 65L 0 65Z" stroke="none" fill="none"></path><g id="SvgjsG3964"><text id="SvgjsText3965" font-family="微软雅黑" text-anchor="end" font-size="19px" width="238px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="4.125" transform="rotate(0)"><tspan id="SvgjsTspan3966" dy="23.75" x="238"><tspan id="SvgjsTspan3967" style="">静止处理器把上面的volatile</tspan></tspan><tspan id="SvgjsTspan3968" dy="23.75" x="238"><tspan id="SvgjsTspan3969" style="">读与下面的普通写重排序</tspan></tspan></text></g></g><g id="SvgjsG3970" transform="translate(740.6097560975606,427.19512195121905)"><path id="SvgjsPath3971" d="M 0 0L 237.80487804878055 0L 237.80487804878055 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3972"><text id="SvgjsText3973" font-family="微软雅黑" text-anchor="end" font-size="19px" width="238px" fill="#7985ec" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan3974" dy="23.75" x="238"><tspan id="SvgjsTspan3975" style="">普通读</tspan></tspan></text></g></g></svg>