<svg id="SvgjsSvg3976" width="1317.9024390243903" height="524.8780487804879" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs3977"><pattern patternUnits="userSpaceOnUse" id="pattern_mark_0" width="300" height="300"><text x="150" y="100" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><pattern patternUnits="userSpaceOnUse" id="pattern_mark_1" width="300" height="300"><text x="150" y="200" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern></defs><rect id="svgbackgroundid" width="1317.9024390243903" height="524.8780487804879" fill="transparent"></rect><rect id="SvgjsRect3979" width="1317.9024390243903" height="524.8780487804879" fill="url(#pattern_mark_0)"></rect><rect id="SvgjsRect3980" width="1317.9024390243903" height="524.8780487804879" fill="url(#pattern_mark_1)"></rect><g id="SvgjsG3981" transform="translate(25,25)"><path id="SvgjsPath3982" d="M 0 0L 603.6585365853659 0L 603.6585365853659 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3983"><text id="SvgjsText3984" font-family="微软雅黑" text-anchor="middle" font-size="25px" width="604px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="25px" weight="700" font-style="" opacity="1" y="-1.625" transform="rotate(0)"><tspan id="SvgjsTspan3985" dy="31.25" x="302"><tspan id="SvgjsTspan3986" style="">volatile 写之前的操作，都禁止重排序到 volatile 之后</tspan></tspan></text></g></g><g id="SvgjsG3987" transform="translate(688.9024390243903,25)"><path id="SvgjsPath3988" d="M 0 0L 603.6585365853659 0L 603.6585365853659 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG3989"><text id="SvgjsText3990" font-family="微软雅黑" text-anchor="middle" font-size="25px" width="604px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="25px" weight="700" font-style="" opacity="1" y="-1.625" transform="rotate(0)"><tspan id="SvgjsTspan3991" dy="31.25" x="302"><tspan id="SvgjsTspan3992" style="">volatile 读之后的操作，都禁止重排序到 volatile 之前</tspan></tspan></text></g></g><g id="SvgjsG3993"><path id="SvgjsPath3994" d="M662.8048780487807 27.43902439024393L662.8048780487807 499.87804878048786" stroke="#a7932c" stroke-width="5" fill="none"></path></g><g id="SvgjsG3995" transform="translate(41.63414634146342,110.6829268292683)"><path id="SvgjsPath3996" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#7985ec"></path><g id="SvgjsG3997"><text id="SvgjsText3998" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan3999" dy="23.75" x="87.5"><tspan id="SvgjsTspan4000" style="">i = 2</tspan></tspan></text></g></g><g id="SvgjsG4001" transform="translate(41.63414634146342,216.0487804878049)"><path id="SvgjsPath4002" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG4003"><text id="SvgjsText4004" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4005" dy="23.75" x="87.5"><tspan id="SvgjsTspan4006" style="">StoreStore屏障</tspan></tspan></text></g></g><g id="SvgjsG4007" transform="translate(41.63414634146345,321.4146341463415)"><path id="SvgjsPath4008" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#a23735"></path><g id="SvgjsG4009"><text id="SvgjsText4010" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4011" dy="23.75" x="87.5"><tspan id="SvgjsTspan4012" style="">flag = true</tspan></tspan></text></g></g><g id="SvgjsG4013" transform="translate(41.63414634146342,426.7804878048781)"><path id="SvgjsPath4014" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG4015"><text id="SvgjsText4016" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4017" dy="23.75" x="87.5"><tspan id="SvgjsTspan4018" style="">StoreLoad屏障</tspan></tspan></text></g></g><g id="SvgjsG4019" transform="translate(251.8292682926829,110.89024390243904)"><path id="SvgjsPath4020" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4021"><text id="SvgjsText4022" font-family="微软雅黑" text-anchor="start" font-size="19px" width="100px" fill="#7985ec" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan4023" dy="23.75" x="0"><tspan id="SvgjsTspan4024" style="">普通写</tspan></tspan></text></g></g><g id="SvgjsG4025" transform="translate(251.8292682926829,211.88109756097566)"><path id="SvgjsPath4026" d="M 0 0L 201.21951219512198 0L 201.21951219512198 48.75L 0 48.75Z" stroke="none" fill="none"></path><g id="SvgjsG4027"><text id="SvgjsText4028" font-family="微软雅黑" text-anchor="start" font-size="19px" width="202px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-4" transform="rotate(0)"><tspan id="SvgjsTspan4029" dy="23.75" x="0"><tspan id="SvgjsTspan4030" style="">禁止上面的普通写与下</tspan></tspan><tspan id="SvgjsTspan4031" dy="23.75" x="0"><tspan id="SvgjsTspan4032" style="">面的 volatile写重排序</tspan></tspan></text></g></g><g id="SvgjsG4033" transform="translate(251.8292682926829,321.62195121951225)"><path id="SvgjsPath4034" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4035"><text id="SvgjsText4036" font-family="微软雅黑" text-anchor="start" font-size="19px" width="100px" fill="#a23735" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan4037" dy="23.75" x="0"><tspan id="SvgjsTspan4038" style="">volatile写</tspan></tspan></text></g></g><g id="SvgjsG4039" transform="translate(251.8292682926829,426.9878048780488)"><path id="SvgjsPath4040" d="M 0 0L 237.80487804878055 0L 237.80487804878055 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4041"><text id="SvgjsText4042" font-family="微软雅黑" text-anchor="start" font-size="19px" width="238px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-19.875" transform="rotate(0)"><tspan id="SvgjsTspan4043" dy="23.75" x="0"><tspan id="SvgjsTspan4044" style="">禁止上面的volatile写与下面</tspan></tspan><tspan id="SvgjsTspan4045" dy="23.75" x="0"><tspan id="SvgjsTspan4046" style="">可能有的volatile读/写重排</tspan></tspan><tspan id="SvgjsTspan4047" dy="23.75" x="0"><tspan id="SvgjsTspan4048" style="">序</tspan></tspan></text></g></g><g id="SvgjsG4049" transform="translate(1028.7073170731708,110.89024390243904)"><path id="SvgjsPath4050" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#a23735"></path><g id="SvgjsG4051"><text id="SvgjsText4052" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4053" dy="23.75" x="87.5"><tspan id="SvgjsTspan4054" style="">if(flag)</tspan></tspan></text></g></g><g id="SvgjsG4055" transform="translate(1028.7073170731708,216.2560975609751)"><path id="SvgjsPath4056" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c431"></path><g id="SvgjsG4057"><text id="SvgjsText4058" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4059" dy="23.75" x="87.5"><tspan id="SvgjsTspan4060" style="">LoadLoad屏障</tspan></tspan></text></g></g><g id="SvgjsG4061" transform="translate(1028.7073170731708,321.6219512195117)"><path id="SvgjsPath4062" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e0c331"></path><g id="SvgjsG4063"><text id="SvgjsText4064" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4065" dy="23.75" x="87.5"><tspan id="SvgjsTspan4066" style="">LoadStore屏障</tspan></tspan></text></g></g><g id="SvgjsG4067" transform="translate(1028.7073170731708,426.9878048780483)"><path id="SvgjsPath4068" d="M 0 0L 174.8292682926829 0L 174.8292682926829 40.414634146341484L 0 40.414634146341484Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#7985ec"></path><g id="SvgjsG4069"><text id="SvgjsText4070" font-family="微软雅黑" text-anchor="middle" font-size="19px" width="155px" fill="#ffffff" font-weight="700" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="19px" weight="700" font-style="" opacity="1" y="3.832317073170742" transform="rotate(0)"><tspan id="SvgjsTspan4071" dy="23.75" x="87.5"><tspan id="SvgjsTspan4072" style="">System...</tspan></tspan></text></g></g><g id="SvgjsG4073" transform="translate(878.4146341463413,111.09756097560978)"><path id="SvgjsPath4074" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4075"><text id="SvgjsText4076" font-family="微软雅黑" text-anchor="end" font-size="19px" width="100px" fill="#a23735" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan4077" dy="23.75" x="100"><tspan id="SvgjsTspan4078" style="">volatile读</tspan></tspan></text></g></g><g id="SvgjsG4079" transform="translate(726.219512195122,216.46341463414586)"><path id="SvgjsPath4080" d="M 0 0L 252.19512195121933 0L 252.19512195121933 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4081"><text id="SvgjsText4082" font-family="微软雅黑" text-anchor="end" font-size="19px" width="253px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="-8.375" transform="rotate(0)"><tspan id="SvgjsTspan4083" dy="23.75" x="253"><tspan id="SvgjsTspan4084" style="">禁止处理器把上面的volatile读</tspan></tspan><tspan id="SvgjsTspan4085" dy="23.75" x="253"><tspan id="SvgjsTspan4086" style="">与下面的普通读重排序</tspan></tspan></text></g></g><g id="SvgjsG4087" transform="translate(740.6097560975604,309.32926829268246)"><path id="SvgjsPath4088" d="M 0 0L 237.8048780487809 0L 237.8048780487809 65L 0 65Z" stroke="none" fill="none"></path><g id="SvgjsG4089"><text id="SvgjsText4090" font-family="微软雅黑" text-anchor="end" font-size="19px" width="238px" fill="#e0c331" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="4.125" transform="rotate(0)"><tspan id="SvgjsTspan4091" dy="23.75" x="238"><tspan id="SvgjsTspan4092" style="">静止处理器把上面的volatile</tspan></tspan><tspan id="SvgjsTspan4093" dy="23.75" x="238"><tspan id="SvgjsTspan4094" style="">读与下面的普通写重排序</tspan></tspan></text></g></g><g id="SvgjsG4095" transform="translate(740.6097560975606,427.19512195121905)"><path id="SvgjsPath4096" d="M 0 0L 237.80487804878055 0L 237.80487804878055 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG4097"><text id="SvgjsText4098" font-family="微软雅黑" text-anchor="end" font-size="19px" width="238px" fill="#7985ec" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="19px" weight="400" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan4099" dy="23.75" x="238"><tspan id="SvgjsTspan4100" style="">普通读</tspan></tspan></text></g></g></svg>